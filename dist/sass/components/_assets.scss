/**
 * Assets
 * --
 * Contains all of the CSS used to format the file/image upload form assets
 * field and all it's different components and states.
 */


/**
 * Assets acceptor
 * --
 * The file upload field is styled to look like a clickable button.
 */
.mh-assets-acceptor {
    position: relative;
    overflow: hidden;

    &__input {
        cursor: pointer;
        font-size: 999px;
        opacity: 0;
        z-index: 1;
        @include position(absolute, 0px 0px null null);

        &:hover + .mh-assets-acceptor__label,
        &:focus + .mh-assets-acceptor__label {
            background-color: rgba(nth($color-themes, 1), 0.15);
            box-shadow: none;
        }

        &:active + .mh-assets-acceptor__label {
            background-color: rgba(nth($color-themes, 1), 0.15);
            box-shadow: inset 0 2px 0 0 rgba(nth($color-themes, 1), 0.3);
        }
    }

    &__label {
        @include btn(standard, $type: bordered, $color: nth($color-themes, 1));
    }
}


/**
 * Assets monitor
 * --
 * The upload progress bar used to show the progress of the file upload after
 * the user has selected what file they want to upload.
 */
.mh-assets-monitor {
    display: flex;

    &__gauge {
        background-color: $color-bkg-main;
        border-radius: $corner-radius;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.15);
        flex: 1;
        height: $btn-standard-height;
        overflow: hidden;
        position: relative;

        &:after {
            border-radius: $corner-radius;
            content: attr(data-mh-progress);
            display: block;
            height: 30px;
            margin: -15px 0 0 -30px;
            mix-blend-mode: difference;
            padding: 0;
            text-align: center;
            width: 55px;
            @include type(
                standard,
                $color: #fff,
                $font-weight: 400,
                $line-height: 30px
            );
            @include position(absolute, 50% null null 50%);
        }
    }

    &__progress {
        background: $color-bkg-nav;
        height: $btn-standard-height;
        width: 0;
    }

    &__cancel {
        @include btn(
            standard,
            $color: $color-font-light,
            $width: $btn-standard-height,
            $height: $btn-standard-height
        );
        flex: 0 0 auto;
        margin-left: 20px;
        position: relative;

        &:before, &:after {
            background-color: #fff;
            border-radius: 1px;
            content: '';
            display: block;
            height: 20px;
            margin: -10px 0 0 -2px;
            width: 4px;
            @include position(absolute, 50% null null 50%);
        }

        &:before {
            @include transform(rotate(45deg));
        }

        &:after {
            @include transform(rotate(-45deg));
        }
    }
}


/**
 * Assets view
 * --
 * The container for showing the newly uploaded image thumbnail, file name, file
 * type, and file size as well as a list of actions related to the image.
 */
.mh-assets-view {
    border-radius: $corner-radius;
    position: relative;

    /**
     * Layouts based on asset type.
     */
    &--image {
        .mh-assets-view {
            &__icon {
                &:after {
                    background-color: $color-bkg-main;
                    box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);
                    content:'';
                    display: block;
                    height: 33px;
                    width: 38px;
                    @include position(absolute, 5px null null 5px);
                }
            }

            &__info {
                padding-left: 74px;
            }
        }
    }

    &--file {
        .mh-assets-view {
            &__thumb {
                display: none;
            }

            &__icon {
                background-color: $color-bkg-main;
                width: 38px;

                &:before {
                    content: '';
                    display: block;
                    @include triangle(11px, rgba(0, 0, 0, 0.2), up-left);
                    @include position(absolute, 1px null null 1px);
                }

                &:after {
                    @include triangle(12px, #fff, up-left);
                    @include position(absolute, 0px null null 0px);
                }
            }

            &__info {
                border-radius: $corner-radius;
                padding-left: 64px;
            }
        }
    }

    &__content {
        position: relative;
    }

    &__icon {
        background-color: #fff;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.15);
        height: 48px;
        width: 48px;
        @include position(absolute, null null -61px 13px);

        &:after {
            box-shadow: 1px 1px 0 0 rgba(0, 0, 0, 0.15);
            content: '';
            display: block;
        }
    }

    &__thumb {
        background: lighten($color-bkg-main, 2%) center center no-repeat;
        border-radius: $corner-radius $corner-radius 0 0;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.15);
        padding-top: 50%;
        width: 100%;
    }

    &__info {
        background-color:#fff;
        border-radius: 0 0 $corner-radius + 1 $corner-radius + 1;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.15);
        margin-top: -1px;
        min-height: $action-height + 26px;
        padding: 13px $action-height 13px 20px;
    }

    &__filename {
        word-wrap: break-word;
        @include type(large, $font-weight: 400);
    }

    &__file-size {
        @include type(small);
    }

    &__actions {
        cursor: pointer;
        height: $action-height;
        overflow: hidden;
        padding-top: $action-height;
        width: $action-height;
        z-index: 1;
        @include position(absolute, null 0px 0px null);

        &:after {
            background: url('../node_modules/manhattan-manage/dist/images/actions.svg') center / auto 28px no-repeat;
            border-radius: $corner-radius 0 $corner-radius 0;
            content: '';
            display: block;
            height: $action-height;
            width: $action-height;
            @include position(absolute, 0px 0px null null);
        }

        &:hover {
            overflow: visible;

            &:after {
                border-radius: $corner-radius 0 0 0;
                box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.15);
                background-color: lighten($color-bkg-main, 2%);
            }
        }
    }

    &__action {
        background-color: #fff;
        box-shadow:
            inset 1px 0 0 0 rgba(0, 0, 0, 0.15),
            inset -1px 0 0 0 rgba(0, 0, 0, 0.15);
        cursor: pointer;
        display: block;
        height: $action-height;
        margin-left: -(100px - $action-height);
        padding: 0 5px;
        text-align: center;
        text-decoration: none;
        width: 100px;
        @include type(
            small,
            $color: $color-font,
            $font-weight: 400,
            $line-height: $action-height
        );

        &:hover {
            background: lighten($color-bkg-main, 2%);
        }

        &:last-child {
            border-radius: 0 0 3px 3px;
            box-shadow:
                inset 1px 0 0 0 rgba(0, 0, 0, 0.15),
                inset -1px 0 0 0 rgba(0, 0, 0, 0.15),
                inset 0 -1px 0 0 rgba(0, 0, 0, 0.15);
        }

        &--remove:hover {
            background-color: $color-alert-error;
            color: #fff;
        }
    }
}